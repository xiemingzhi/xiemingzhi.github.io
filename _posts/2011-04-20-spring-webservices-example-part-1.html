---
title: Spring webservices example part 1
date: '2011-04-20T19:47:00.000-07:00'
author: bloggerming
tags:
- spring
modified_time: '2015-06-04T05:58:35.309-07:00'
blogger_id: tag:blogger.com,1999:blog-3711184356900467447.post-8202683411770386967
blogger_orig_url: http://technoming.blogspot.com/2011/04/spring-webservices-example-part-1.html
---

This is a blog on how I implemented webservices using the spring framework.<br />In part 1 we setup a simple spring web application. A simple contact<br />application which allows users to store names and addresses.<br />In part 2 we then extend it to a web services that displays the list of<br />contacts. With a simple console application to call this web service.<br />We assume you have already setup a working environment ie. eclipse setup<br />with tomcat.<br />Create a web application project in eclipse.<br /><br />We will be using spring 3.1 so download it and extract the following<br />jars to WEB-INF/lib<br />org.springframework.aop-3.1.0.M1.jar<br />org.springframework.asm-3.1.0.M1.jar<br />org.springframework.aspects-3.1.0.M1.jar<br />org.springframework.beans-3.1.0.M1.jar<br />org.springframework.context-3.1.0.M1.jar<br />org.springframework.core-3.1.0.M1.jar<br />org.springframework.expression-3.1.0.M1.jar<br />org.springframework.jdbc-3.1.0.M1.jar<br />org.springframework.orm-3.1.0.M1.jar<br />org.springframework.transaction-3.1.0.M1.jar<br />org.springframework.web-3.1.0.M1.jar<br />org.springframework.web.servlet-3.1.0.M1.jar<br />Include the hibernate and database jars:<br />hibernate3.jar<br />hsqldb.jar<br />We will be using the embedded hsqldb database.<br /><br />Add to web.xml<br /><pre  style="font-family:arial;font-size:12px;border:1px dashed #CCCCCC;width:99%;height:auto;overflow:auto;background:#f0f0f0;;background-image:URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif);padding:0px;color:#000000;text-align:left;line-height:20px;"><code style="color:#000000;word-wrap:normal;"> &lt;context-param&gt;  <br /> &lt;param-name&gt;log4jConfigLocation&lt;/param-name&gt;  <br /> &lt;param-value&gt;/WEB-INF/log4j.properties&lt;/param-value&gt;  <br /> &lt;/context-param&gt;  <br /> &lt;listener&gt;  <br /> &lt;listener-class&gt;org.springframework.web.util.Log4jConfigListener&lt;/listener-class&gt;  <br /> &lt;/listener&gt;  <br /> &lt;!-- this looks for applicationContext.xml --&gt;  <br /> &lt;listener&gt;  <br /> &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;  <br /> &lt;/listener&gt;  <br /> &lt;!-- this looks for springwebapp-servlet.xml --&gt;  <br /> &lt;servlet&gt;  <br /> &lt;servlet-name&gt;springwebapp&lt;/servlet-name&gt;  <br /> &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;  <br /> &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;  <br /> &lt;/servlet&gt;  <br /> &lt;servlet-mapping&gt;  <br /> &lt;servlet-name&gt;springwebapp&lt;/servlet-name&gt;  <br /> &lt;url-pattern&gt;*.htm&lt;/url-pattern&gt;  <br /> &lt;/servlet-mapping&gt;  <br /></code></pre><br />springwebapp-servlet.xml<br />Use the XML schema style beans definition ie use:<br /><pre  style="font-family:arial;font-size:12px;border:1px dashed #CCCCCC;width:99%;height:auto;overflow:auto;background:#f0f0f0;;background-image:URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif);padding:0px;color:#000000;text-align:left;line-height:20px;"><code style="color:#000000;word-wrap:normal;"> &lt;beans xmlns:context="http://www.springframework.org/schema/context"&gt;http://www.springframework.org/schema/context"  <br /> xmlns:mvc="http://www.springframework.org/schema/mvc"&gt;http://www.springframework.org/schema/mvc"  <br /> xsi:schemaLocation="http://www.springframework.org/schema/mvc"&gt;http://www.springframework.org/schema/mvc  <br /> http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd"&gt;http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd  <br /> http://www.springframework.org/schema/beans"&gt;http://www.springframework.org/schema/beans  <br /> http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;http://www.springframework.org/schema/beans/spring-beans-2.5.xsd  <br /> http://www.springframework.org/schema/context"&gt;http://www.springframework.org/schema/context  <br /> http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;  <br /> &lt;!-- We will be using annotations --&gt;  <br /> &lt;context:component-scan base-package="com.mycompany" /&gt;  <br /> &lt;mvc:annotation-driven /&gt;  <br /> &lt;bean id="viewResolver"  <br /> class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;  <br /> &lt;property  <br /> name="viewClass"&gt;&lt;value&gt;org.springframework.web.servlet.view.JstlView&lt;/value&gt;&lt;/property&gt;  <br /> &lt;property name="prefix"&gt;&lt;value&gt;/WEB-INF/jsp/&lt;/value&gt;&lt;/property&gt;  <br /> &lt;property name="suffix"&gt;&lt;value&gt;.jsp&lt;/value&gt;&lt;/property&gt;  <br /> &lt;/bean&gt;  <br /> &lt;beans&gt;  <br /></code></pre><br />applicationContext.xml<br /><pre  style="font-family:arial;font-size:12px;border:1px dashed #CCCCCC;width:99%;height:auto;overflow:auto;background:#f0f0f0;;background-image:URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif);padding:0px;color:#000000;text-align:left;line-height:20px;"><code style="color:#000000;word-wrap:normal;"> &lt;!-- Setup hsqldb datasource --&gt;  <br /> &lt;bean id="dataSource"  <br /> class="org.apache.commons.dbcp.BasicDataSource"  <br /> destroy-method="close"&gt;  <br /> &lt;property name="driverClassName"&gt;  <br /> &lt;value&gt;org.hsqldb.jdbcDriver&lt;/value&gt;  <br /> &lt;/property&gt;  <br /> &lt;property name="url"&gt;  <br /> &lt;value&gt;jdbc:hsqldb:mem:contactdb&lt;/value&gt;  <br /> &lt;/property&gt;  <br /> &lt;property name="username"&gt;  <br /> &lt;value&gt;sa&lt;/value&gt;  <br /> &lt;/property&gt;  <br /> &lt;property name="password"&gt;  <br /> &lt;value&gt;&lt;/value&gt;  <br /> &lt;/property&gt;  <br /> &lt;/bean&gt;  <br /> &lt;!-- Hibernate sessionFactory --&gt;  <br /> &lt;bean id="sessionFactory"  <br /> class="org.springframework.orm.hibernate3.LocalSessionFactoryBean"&gt;  <br /> &lt;property name="mappingResources"&gt;  <br /> &lt;list&gt;  <br /> &lt;value&gt;com/mycompany/Contact.hbm.xml&lt;/value&gt;  <br /> &lt;/list&gt;  <br /> &lt;/property&gt;  <br /> &lt;property name="hibernateProperties"&gt;  <br /> &lt;props&gt;  <br /> &lt;prop key="hibernate.dialect"&gt;org.hibernate.dialect.HSQLDialect&lt;/prop&gt;  <br /> &lt;prop key="hibernate.show_sql"&gt;true&lt;/prop&gt;  <br /> &lt;prop key="hibernate.cglib.use_reflection_optimizer"&gt;true&lt;/prop&gt;  <br /> &lt;prop  <br /> key="hibernate.cache.provider_class"&gt;org.hibernate.cache.HashtableCacheProvider&lt;/prop&gt;  <br /> &lt;prop key="hibernate.hbm2ddl.auto"&gt;create&lt;/prop&gt;  <br /> &lt;/props&gt;  <br /> &lt;/property&gt;  <br /> &lt;property name="dataSource"&gt;  <br /> &lt;ref bean="dataSource"/&gt;  <br /> &lt;/property&gt;  <br /> &lt;/bean&gt;  <br /> &lt;bean id="jdbcExceptionTranslator"  <br /> class="org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator"&gt;  <br /> &lt;property name="dataSource"&gt;&lt;ref bean="dataSource"/&gt;&lt;/property&gt;  <br /> &lt;/bean&gt;  <br /> &lt;!-- Hibernate Template Defintion --&gt;  <br /> &lt;bean id="hibernateTemplate"  <br /> class="org.springframework.orm.hibernate3.HibernateTemplate"&gt;  <br /> &lt;property name="sessionFactory"&gt;&lt;ref bean="sessionFactory"/&gt;&lt;/property&gt;  <br /> &lt;property name="jdbcExceptionTranslator"&gt;&lt;ref  <br /> bean="jdbcExceptionTranslator"/&gt;&lt;/property&gt;  <br /> &lt;/bean&gt;  <br /> &lt;!-- Contact DAO Definition: Hibernate implementation --&gt;  <br /> &lt;!-- Just use the hibernateTemplate for saving and getting the objects --&gt;  <br /> &lt;bean id="contactDao" class="com.mycompany.dao.ContactDAOHibernate"&gt;  <br /> &lt;property name="hibernateTemplate"&gt;&lt;ref  <br /> bean="hibernateTemplate"/&gt;&lt;/property&gt;  <br /> &lt;/bean&gt;  <br /> &lt;!-- Separate Business layer from DAO layer --&gt;  <br /> &lt;bean id="contactApp" class="com.mycompany.ContactAppImpl"&gt;  <br /> &lt;property name="contactDao"&gt;  <br /> &lt;ref bean="contactDao"/&gt;  <br /> &lt;/property&gt;  <br /> &lt;/bean&gt;  <br /></code></pre><br />java code<br />ContactAppController.java<br /><pre  style="font-family:arial;font-size:12px;border:1px dashed #CCCCCC;width:99%;height:auto;overflow:auto;background:#f0f0f0;;background-image:URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif);padding:0px;color:#000000;text-align:left;line-height:20px;"><code style="color:#000000;word-wrap:normal;"> package com.mycompany.web;  <br /> import org.apache.commons.logging.Log;  <br /> import org.apache.commons.logging.LogFactory;  <br /> import org.springframework.web.bind.annotation.RequestMapping;  <br /> import org.springframework.beans.factory.annotation.Autowired;  <br /> import org.springframework.ui.Model;  <br /> import org.springframework.web.bind.annotation.RequestParam;  <br /> import org.springframework.web.bind.annotation.ResponseBody;  <br /> import org.springframework.stereotype.Controller;  <br /> import com.mycompany.ContactApp;  <br /> @Controller  <br /> public class ContactAppController {  <br /> protected final Log logger = LogFactory.getLog(getClass());  <br /> String command;  <br /> @Autowired  <br /> ContactApp contactApp;  <br /> public ContactApp getContactApp() {  <br /> return contactApp;  <br /> }  <br /> public void setContactApp(ContactApp contactApp) {  <br /> this.contactApp = contactApp;  <br /> }  <br /> public String getCommand() {  <br /> return command;  <br /> }  <br /> public void setCommand(String command) {  <br /> this.command = command;  <br /> }  <br /> @RequestMapping(value="/listcontacts.htm")  <br /> public void listcontactsHandler(Model model) {  <br /> model.addAttribute("contactList",contactApp.getAllContacts());  <br /> }  <br /> @RequestMapping(value="/occupied.htm")  <br /> public @ResponseBody boolean isOccupiedHandler(@RequestParam String  <br /> email) {  <br /> logger.debug("inside isOccupiedHandler containsEmail is " +  <br /> contactApp.containsEmail(email));  <br /> return contactApp.containsEmail(email);  <br /> }  <br /> }  <br /></code></pre><br />ContactDAOHibernate.java<br /><pre  style="font-family:arial;font-size:12px;border:1px dashed #CCCCCC;width:99%;height:auto;overflow:auto;background:#f0f0f0;;background-image:URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif);padding:0px;color:#000000;text-align:left;line-height:20px;"><code style="color:#000000;word-wrap:normal;"> package com.mycompany.dao;  <br /> import java.sql.SQLException;  <br /> import java.util.List;  <br /> import org.apache.commons.logging.Log;  <br /> import org.apache.commons.logging.LogFactory;  <br /> import org.hibernate.HibernateException;  <br /> import org.hibernate.Query;  <br /> import org.hibernate.Session;  <br /> import org.springframework.orm.hibernate3.HibernateCallback;  <br /> import org.springframework.orm.hibernate3.support.HibernateDaoSupport;  <br /> import com.mycompany.Contact;  <br /> public class ContactDAOHibernate extends HibernateDaoSupport implements  <br /> ContactDAO{  <br /> protected final Log logger = LogFactory.getLog(getClass());  <br /> public void insertContact(Contact contact) {  <br /> logger.debug("Inside ContactDAOHibernate.insert() method");  <br /> this.getHibernateTemplate().save(contact);  <br /> }  <br /> public List getContacts() {  <br /> logger.debug("Inside ContactDAOHibernate.getContacts() method");  <br /> return getHibernateTemplate().executeFind(new HibernateCallback() {  <br /> public Object doInHibernate(Session session)  <br /> throws HibernateException, SQLException {  <br /> StringBuffer sb = new StringBuffer(100);  <br /> sb.append("select distinct contact ");  <br /> sb.append("from Contact contact ");  <br /> sb.append("order by contact.contactId");  <br /> Query query = session.createQuery(sb.toString());  <br /> List list = query.list();  <br /> return list;  <br /> }  <br /> });  <br /> }  <br /> public Contact getContact(int contactId) {  <br /> logger.debug("Inside ContactDAOHibernate.getContact() method");  <br /> return (Contact)getHibernateTemplate().get(Contact.class,  <br /> contactId);  <br /> }  <br /> public void updateContact(Contact contact) {  <br /> logger.debug("Inside ContactDAOHibernate.updateContact() method");  <br /> this.getHibernateTemplate().update(contact);  <br /> }  <br /> public void deleteContact(int contactId) {  <br /> logger.debug("Inside ContactDAOHibernate.deleteContact() method");  <br /> this.getHibernateTemplate().delete(contactId);  <br /> }  <br /> }  <br /></code></pre><br />ContactAppImpl.java<br /><pre  style="font-family:arial;font-size:12px;border:1px dashed #CCCCCC;width:99%;height:auto;overflow:auto;background:#f0f0f0;;background-image:URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif);padding:0px;color:#000000;text-align:left;line-height:20px;"><code style="color:#000000;word-wrap:normal;"> package com.mycompany;  <br /> import java.util.Collection;  <br /> import java.util.List;  <br /> import org.apache.commons.logging.Log;  <br /> import org.apache.commons.logging.LogFactory;  <br /> import com.mycompany.dao.ContactDAO;  <br /> /**  <br /> * @author testuser  <br /> *  <br /> */  <br /> public class ContactAppImpl implements ContactApp {  <br /> protected final Log logger = LogFactory.getLog(getClass());  <br /> private List&lt;Contact&gt; contactList;  <br /> private ContactDAO contactDao;  <br /> public ContactAppImpl() {  <br /> }  <br /> public List&lt;Contact&gt; getContactList() {  <br /> return contactList;  <br /> }  <br /> public void setContactList(List&lt;Contact&gt; contactList) {  <br /> this.contactList = contactList;  <br /> }  <br /> public ContactDAO getContactDao() {  <br /> return contactDao;  <br /> }  <br /> public void setContactDao(ContactDAO contactDao) {  <br /> this.contactDao = contactDao;  <br /> }  <br /> /* (non-Javadoc)  <br /> * @see com.sample.ContactApp#getContact(java.lang.String)  <br /> */  <br /> public Contact getContact(String firstName) {  <br /> Contact c = new Contact();  <br /> c.setFirstName(firstName);  <br /> return c;  <br /> }  <br /> @Override  <br /> public List&lt;Contact&gt; getAllContacts() {  <br /> return contactDao.getContacts();  <br /> }  <br /> @Override  <br /> public void insertContacts(List&lt;Contact&gt; contactList) {  <br /> for (Contact c : contactList)  <br /> {  <br /> logger.debug("c firstname = " + c.getFirstName());  <br /> logger.info("Returning hello view firstname;" +  <br /> c.getFirstName());  <br /> contactDao.insertContact(c);  <br /> }  <br /> }  <br /> @Override  <br /> public int getNumberOfContacts() {  <br /> return contactList.size();  <br /> }  <br /> @Override  <br /> public void insertAcontact(Contact contact) {  <br /> contactDao.insertContact(contact);  <br /> }  <br /> @Override  <br /> public boolean containsEmail(String email) {  <br /> Collection&lt;Contact&gt; c = contactDao.getContacts();  <br /> for (Contact contact : c)  <br /> {  <br /> if (contact.getEmail().equals(email))  <br /> {  <br /> return true;  <br /> }  <br /> }  <br /> return false ;  <br /> }  <br /> }  <br /></code></pre><br />Simple page to show that everything is working ok.<br />listcontacts.jsp<br /><pre  style="font-family:arial;font-size:12px;border:1px dashed #CCCCCC;width:99%;height:auto;overflow:auto;background:#f0f0f0;;background-image:URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif);padding:0px;color:#000000;text-align:left;line-height:20px;"><code style="color:#000000;word-wrap:normal;"> &lt;%@ page language="java" contentType="text/html; charset=UTF-8"  <br /> pageEncoding="UTF-8"%&gt;  <br /> &lt;%@ include file="/WEB-INF/jsp/include.jsp" %&gt;  <br /> &lt;%@ include file="/WEB-INF/jsp/header.jsp" %&gt;  <br /> &lt;p&gt;Show the contact list&lt;/p&gt;  <br /> &lt;c:forEach items="${contactList}" var="contact"&gt;  <br /> firstname: &lt;c:out value="${contact.firstName}"/&gt; lastname: &lt;i&gt;&lt;c:out  <br /> value="${contact.lastName}"/&gt;&lt;/i&gt;&lt;br&gt;&lt;br&gt;  <br /> &lt;/c:forEach&gt;  <br /> &lt;%@ include file="/WEB-INF/jsp/footer.jsp" %&gt;  <br /></code></pre><br />Access page via <a href="http://localhost:8080/springwebapp/listcontacts.htm">http://localhost:8080/springwebapp/listcontacts.htm</a>