---
layout: post
title: Jboss mdb example
date: '2009-03-24T00:11:00.003-07:00'
author: bloggerming
tags:
- mdb
- jboss
modified_time: '2015-12-03T02:10:28.003-08:00'
blogger_id: tag:blogger.com,1999:blog-3711184356900467447.post-1616202071655362537
blogger_orig_url: http://technoming.blogspot.com/2009/03/jboss-mdb-example.html
---

This is an example on writing a Message Driven Bean in JBoss<br />if you decide to use jboss as your application server<br />components  used<br /><a href="http://jboss-4.0.5.ga/">jboss-4.0.5.GA</a><br />eclipse 3.2<br />xdoclet 1.2<br /><br />setup eclipse to use  jboss application server and configure xdoclet<br />use eclipse to create  mdb (MessageBean.java)<br />things to add to mdb (MessageBean.java)<br /><pre>*  @jboss.destination-jndi-name<br /><br />*       name="queue/DelMdbQueue"<br /><br /></pre>or use<br /><pre>*      destination-jndi-name="Message"<br /><br /></pre>add code in onMessage<br /><pre>public void  onMessage(javax.jms.Message message) {<br /><br />// begin-user-code<br /><br />System.out.println("Message Driven Bean got message " + message);<br /><br />//  TODO:  do business logic here<br /><br />System.out.println("mdb doing business  logic");<br /><br />}<br /><br /></pre><br />create application client (can use dynamic web project) put  lib files into  web-inf/lib<br />commons-logging-1.0.3.jar<br />concurrent-1.3.4.jar<br />concurrent.jar<br />gnu-regexp.jar<br />JavaGroups.jar<br />jboss-j2ee.jar<br />jboss-messaging-client.jar<br />jboss-spine.jar<br />jboss.jar<br />jbossmq.jar<br />jms-1.1.jar<br />jmxtools.jar<br />jndi.jar<br />jnpserver.jar<br />log4j.jar<br />openjms-0.7.7-beta-1.jar<br />openjms-common-0.7.7-beta-1.jar<br />openjms-net-0.7.7-beta-1.jar<br />openjms-tools-0.7.7-beta-1.jar<br />spice-jndikit-1.2.jar<br /><br />create  MessageTest class<br /><pre>package com.mycompany.test;<br /><br /><br /><br />import  java.util.Hashtable;<br /><br /><br /><br />import javax.jms.ObjectMessage;<br /><br />import  javax.jms.Queue;<br /><br />import javax.jms.QueueConnection;<br /><br />import  javax.jms.QueueConnectionFactory;<br /><br />import javax.jms.QueueSender;<br /><br />import  javax.jms.QueueSession;<br /><br />import javax.naming.InitialContext;<br /><br />import  javax.naming.NamingException;<br /><br /><br /><br />public class MessageTest {<br /><br /><br /><br />/**<br /><br />* @param args<br /><br />*/<br /><br />public static void main(String[]  args) {<br /><br />// TODO Auto-generated method stub<br /><br />MessageTest  mdbean = new MessageTest ();<br /><br />mdbean.testMDBBean() ;<br /><br />}<br /><br /><br /><br />private InitialContext getContext() throws NamingException {<br /><br />//using jboss version<br /><br />Hashtable props = new Hashtable();<br /><br /><br /><br />props.put(<br /><br />InitialContext.INITIAL_CONTEXT_FACTORY,<br /><br />"org.jnp.interfaces.NamingContextFactory");<br /><br />props.put(InitialContext.PROVIDER_URL, "jnp://<a href="http://127.0.0.1:1099/">127.0.0.1:1099</a>");<br /><br /><br /><br />InitialContext initialContext = new InitialContext(props);<br /><br />return  initialContext;<br /><br />}<br /><br /><br /><br />public void testMDBBean() {<br /><br />try  {<br /><br />System.out.println("Looking up the factory ");<br /><br /><br /><br />InitialContext ctx = getContext();<br /><br /><br /><br />QueueConnectionFactory factory = (QueueConnectionFactory)  ctx.lookup("QueueConnectionFactory");<br /><br />//using jboss  version<br /><br />System.out.println("Looking up the queue ");            <br /><br />Queue queue = (Queue) ctx.lookup("queue/Message");            <br /><br /><br /><br />System.out.println("Creating the connection ");            <br /><br /><br /><br />QueueConnection connection =  factory.createQueueConnection();<br /><br /><br /><br />System.out.println("Creating the session ");           <br /><br />QueueSession session = connection.createQueueSession(true, 1);<br /><br /><br /><br />System.out.println("Creating the sender ");           <br /><br />QueueSender sender = session.createSender(queue);           <br /><br />ObjectMessage message = session.createObjectMessage();<br /><br /><br /><br />System.out.println ("Setting the object in message ");                        <br /><br />message.setObject("di object");<br /><br /><br /><br />System.out.println ("Sending the message ");<br /><br /><br /><br />sender.send(message);<br /><br />System.out.println  ("Shuting down");<br /><br />session.commit();<br /><br />session.close();<br /><br />connection.close();<br /><br /><br /><br />System.out.println ("Done ! ");                                                            <br /><br /><br /><br />} catch (Exception e) {<br /><br />e.printStackTrace();<br /><br />}   <br /><br />}<br /><br /><br /><br />}<br /><br /></pre><br />note the use of   "queue/Message" and "QueueConnectionFactory"